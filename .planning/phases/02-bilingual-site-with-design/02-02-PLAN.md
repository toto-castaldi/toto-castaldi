---
phase: 02-bilingual-site-with-design
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - layouts/_default/baseof.html
  - layouts/partials/head.html
  - layouts/partials/language-switcher.html
  - layouts/index.html
  - static/favicon.svg
autonomous: true
requirements: [CONT-01, CONT-06, UI-01, UI-02, UI-03]

must_haves:
  truths:
    - "Each project card shows project name, bilingual description, and clickable link to its subdomain"
    - "Language switcher in top-right corner navigates between Italian and English versions of the same page"
    - "Page uses semantic HTML with header, nav, main elements and correct heading hierarchy (h1 title, h2 project names)"
    - "SVG favicon adapts to OS dark mode preference"
    - "Cards stack vertically and page renders correctly on mobile with no horizontal scrolling"
    - "Zero JavaScript in the rendered output"
  artifacts:
    - path: "layouts/partials/language-switcher.html"
      provides: "Language navigation using Hugo .Translations"
      contains: ".Translations"
    - path: "layouts/index.html"
      provides: "Project card rendering from data/projects.toml"
      contains: ".Site.Data.projects.project"
    - path: "layouts/_default/baseof.html"
      provides: "Semantic HTML structure with header and nav"
      contains: "<header>"
    - path: "layouts/partials/head.html"
      provides: "Meta description and favicon link"
      contains: "favicon.svg"
    - path: "static/favicon.svg"
      provides: "Dark-mode-aware SVG favicon"
      contains: "prefers-color-scheme"
  key_links:
    - from: "layouts/index.html"
      to: "data/projects.toml"
      via: "Hugo range over .Site.Data.projects.project"
      pattern: "range.*\\.Site\\.Data\\.projects\\.project"
    - from: "layouts/index.html"
      to: "i18n/*.toml"
      via: 'Hugo T function for UI strings'
      pattern: 'T "viewProject"'
    - from: "layouts/partials/language-switcher.html"
      to: "content/_index.*.md"
      via: "Hugo .Translations for page-level language links"
      pattern: "\\.Translations"
    - from: "layouts/_default/baseof.html"
      to: "layouts/partials/language-switcher.html"
      via: "Hugo partial include"
      pattern: 'partial "language-switcher.html"'
    - from: "layouts/partials/head.html"
      to: "static/favicon.svg"
      via: "HTML link rel=icon"
      pattern: 'rel="icon".*favicon\\.svg'
---

<objective>
Wire templates to render project cards, language switcher, semantic HTML structure, meta tags, and favicon -- integrating the data and CSS from Plan 01 into the final user-facing page.

Purpose: This is the integration plan that produces the actual visible site. It connects project data to HTML templates, adds the language switcher for bilingual navigation, and completes the page with a favicon and proper meta tags.

Output: Updated `baseof.html` and `head.html`, new `language-switcher.html` partial, rewritten `index.html` with project cards, and `static/favicon.svg`.
</objective>

<execution_context>
@/home/toto/.claude/get-shit-done/workflows/execute-plan.md
@/home/toto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-bilingual-site-with-design/02-RESEARCH.md
@.planning/phases/02-bilingual-site-with-design/02-CONTEXT.md
@.planning/phases/02-bilingual-site-with-design/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create semantic page structure, language switcher, head meta, and favicon</name>
  <files>
    layouts/_default/baseof.html
    layouts/partials/head.html
    layouts/partials/language-switcher.html
    static/favicon.svg
  </files>
  <action>
1. **Update `layouts/_default/baseof.html`** to add semantic HTML structure:
```html
<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  <header class="site-header">
    <nav class="language-switch" aria-label="{{ T "languageSwitch" }}">
      {{ partial "language-switcher.html" . }}
    </nav>
  </header>
  <main>
    {{ block "main" . }}{{ end }}
  </main>
</body>
</html>
```
Key points:
- `<header>` and `<nav>` elements for semantic HTML (UI-03)
- `aria-label` on nav uses i18n T function for accessibility
- No `<footer>` -- page ends after main content (per user decision: "no footer")
- `lang` attribute already present from Phase 1

2. **Update `layouts/partials/head.html`** to add meta description and favicon:
```html
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ .Title }}</title>
{{ with .Description }}
<meta name="description" content="{{ . }}">
{{ end }}
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
{{ $css := resources.Get "css/main.css" | resources.Minify | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
```
Key points:
- `{{ with .Description }}` renders meta description only when front matter has it (CONT-04)
- `<link rel="icon">` (not "shortcut icon") points to SVG favicon (CONT-06)
- Hugo Pipes CSS pipeline preserved from Phase 1

3. **Create `layouts/partials/language-switcher.html`**:
Show only the ALTERNATE language (since there are only two languages, showing current is redundant).
Use `.Translations` which returns only other languages (excludes current).
```html
{{ range .Translations }}
<a href="{{ .RelPermalink }}" lang="{{ .Language.Lang }}" hreflang="{{ .Language.Lang }}">
  {{ upper .Language.Lang }}
</a>
{{ end }}
```
This renders "EN" when on Italian, "IT" when on English. Uses `upper` to display uppercase language code. The `lang` and `hreflang` attributes improve accessibility and SEO.

4. **Create `static/favicon.svg`**:
A simple "TC" monogram (for Toto Castaldi) with dark mode support via embedded CSS:
```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <style>
    .fg { fill: #1a1a1a; }
    @media (prefers-color-scheme: dark) {
      .fg { fill: #f3f4f6; }
    }
  </style>
  <text class="fg" x="50%" y="50%" dominant-baseline="central"
        text-anchor="middle" font-size="20" font-weight="bold"
        font-family="system-ui, sans-serif">TC</text>
</svg>
```
Colors match the design system tokens (dark text on transparent for light mode, light text for dark mode).
  </action>
  <verify>
Run `hugo server -D` and confirm:
1. No build errors or template warnings
2. The language switcher link appears in the rendered HTML (inspect page source)
3. Clicking the language switcher URL navigates to the alternate language version (e.g., /en/ <-> /it/)
4. `<meta name="description">` appears in the HTML head
5. `<link rel="icon" href="/favicon.svg">` appears in the HTML head
6. Favicon file exists at `static/favicon.svg` and is valid SVG
  </verify>
  <done>
baseof.html has semantic `<header>`, `<nav>`, `<main>` structure. Language switcher shows alternate language link in top-right corner. head.html includes meta description from front matter and SVG favicon link. Favicon is a TC monogram with dark mode support.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build project card template with data integration</name>
  <files>
    layouts/index.html
  </files>
  <action>
Rewrite `layouts/index.html` to render the complete home page with title, tagline, and project cards.

```html
{{ define "main" }}
<section>
  <h1 class="page-title">{{ .Title }}</h1>
  <p class="tagline">{{ T "tagline" }}</p>
</section>

<section class="project-cards" aria-label="{{ T "tagline" }}">
  {{ range .Site.Data.projects.project }}
  <article class="project-card">
    {{ if .logo }}
    <img src="{{ .logo }}" alt="" class="project-logo" loading="lazy" width="48" height="48">
    {{ end }}
    <h2>{{ .name }}</h2>
    <p>{{ index .description site.Language.Lang }}</p>
    <a href="{{ .url }}" class="card-link">
      <span class="sr-only">{{ T "viewProject" }}: </span>{{ .name }}
    </a>
  </article>
  {{ end }}
</section>
{{ end }}
```

Key implementation details:

1. **Page title** (`<h1>`) uses `{{ .Title }}` from content front matter. Centered via `.page-title` CSS class.

2. **Tagline** uses `{{ T "tagline" }}` from i18n strings. Styled as quiet subtitle via `.tagline` CSS class (smaller, muted, lighter weight per user decision).

3. **Project cards** use `{{ range .Site.Data.projects.project }}` to iterate over data.
   - Access path: `.Site.Data.projects.project` -- `projects` = filename, `project` = TOML key (Pitfall 7 from research).
   - Description uses `{{ index .description site.Language.Lang }}` to get the current language's text.
   - Logo rendered only if non-empty (`{{ if .logo }}`). Uses `loading="lazy"` for external images and explicit `width`/`height` to prevent layout shift (Pitfall 6 from research).
   - `alt=""` on logo because the project name is already in the `<h2>` -- logo is decorative.

4. **Whole-card clickable** via `.card-link::after` pseudo-element overlay (CSS from Plan 01 Task 2). The `<a>` element is visible text, its `::after` covers the card. Zero JavaScript (UI-04).

5. **Screen reader support**: `<span class="sr-only">` provides context ("Visit project: Docora") for the link text that otherwise just shows the project name.

6. **Heading hierarchy**: h1 (page title) -> h2 (project names). No skipped levels (UI-03).

7. **No `.Content` rendering** -- the content body in `_index.*.md` is now empty (cleared in Plan 01). All content comes from data templates and i18n strings.

IMPORTANT: Use `site.Language.Lang` (lowercase `site`) not `.Site.Language.Lang` inside the `range` block, because inside `range` the context `.` changes to the current project item. Using `site` (Hugo global) avoids scoping issues. Alternatively, use `$.Site.Language.Lang` with the `$` global accessor.
  </action>
  <verify>
Run `hugo server -D` and confirm:
1. Three project cards appear on both /it/ and /en/ pages
2. Project descriptions are in the correct language for each page
3. Each card shows the project name as an h2
4. The Docora card shows a logo image (if the external URL is accessible)
5. Each card links to the correct subdomain URL
6. The page has no JavaScript in view-source
7. No horizontal scrolling on mobile viewport (resize browser to 375px width)
8. Inspect heading hierarchy: one h1, three h2 elements, no skipped levels
  </verify>
  <done>
`index.html` renders three project cards from `data/projects.toml` with bilingual descriptions, clickable links to subdomains, proper heading hierarchy, and accessible link text. Page has title, quiet tagline, and card grid. Zero JavaScript. Cards stack vertically at all viewport sizes.
  </done>
</task>

</tasks>

<verification>
1. `hugo server -D` builds with zero errors and zero warnings
2. Visit /it/ -- page shows Italian title, Italian tagline, three cards with Italian descriptions
3. Visit /en/ -- page shows English title, English tagline, three cards with English descriptions
4. Language switcher in top-right shows "EN" on Italian page and "IT" on English page
5. Clicking language switcher navigates to the same page in the other language
6. Browser dark mode: page switches to dark colors automatically (test in DevTools)
7. Favicon visible in browser tab (TC monogram)
8. View source: zero `<script>` tags, no inline JavaScript
9. Mobile responsive: no horizontal scroll at 375px viewport width
10. `<meta name="description">` present with language-appropriate content
</verification>

<success_criteria>
The complete bilingual landing page is functional: three project cards with correct content in both languages, working language switcher, dark mode, responsive layout, semantic HTML, and zero JavaScript. All Phase 2 requirements (CONT-01 through CONT-06, UI-01 through UI-05, DSGN-01 through DSGN-04) are satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/02-bilingual-site-with-design/02-02-SUMMARY.md`
</output>
